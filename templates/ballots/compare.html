{% extends "base.html" %}

{% block h1 %}Ballot Conflict Resolution{% endblock %}

{% block content %}
	    <script src="/static/jquery.js"></script>
	    <script src="/static/json2.js"></script>
        <script src="/static/ballot.js"></script>
<table>
<tr>
<th>RO</th>
<th>Ballot Number</th>
<th>Id</th>
<th>Vote</th>
<th>Choose wisely...</th>
</tr>
{% for ballot in ballots %}
<tr>
<td>{{ballot.entered_by}}</td>
<td>{{ballot.ballot_num}}</td>
<td>{{ballot.id}}</td>
<td>
<!--This is a fake form.-->
<form id="ballot-{{ballot.id}}">
<table>
	<tr>
		<th>Candidate</th>
		<th colspan="3">Ranking</th>
	</tr>
	<tr>
		<th></th>
        {% for person in candidates %}
	    	<th>{{forloop.counter}}</th>
        {%endfor%}
	</tr>

	{% for person in candidates %}
	<tr>
		<td>{{ person.name }}</td>
        {%for _ in candidates %}
        	<td><input type="radio" name="{{person.id}}" class="data-column-{{forloop.counter}}" value="{{forloop.counter}}" id="id-{{person.id}}-{{forloop.counter}}" disabled /></td>
        {%endfor%}
	</tr>
	{% endfor %}
    <td>Spoiled : {{ballot.spoiled}}</td>

</table>
<script>
	display({{ballot.id}}, {{ballot.vote|safe}}, {{ballot.spoiled|lower}});
</script>
</form>
</td>
<td>
<form method="post" id="submit-ballot-{{ballot.id}}" action="{% url ballots.views.accept_ballot %}">
{% csrf_token %}
<input type="submit" value="Use This One" name="{{ballot.ballot_num}}" id="id-{{ballot.ballot_num}}" />
<input type="hidden" name="ballot_num" value="{{ballot.ballot_num}}" />
<input type="hidden" name="ballot_id" value="{{ballot.id}}" />
</form>
</td>
<script>
	//console.log(JSON.parse("{{ballot.vote}}"));
	//console.log({{ballot.vote|safe}});
</script>
{% endfor %}
</tr>
<td></td>
<td></td>
<td></td>
<td><input type="button" value="Use This One" name="-1" id="-1" /></td>



</table>
{% endblock %}