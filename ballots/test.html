<html>
  <head>
    <meta charset="utf-8">
    <title>Radio Grid</title>
    
    <style>
      table {
        border-columnlapse: columnlapse;
      }
      td, th {
        border: 1px solid #000;
        padding: 10px;
      }
    </style>
    
    
  </head>
  <body>
    <script src="../static/jquery.js"></script>
    <script src="../static/json2.js"></script>
		<script type="text/javascript">
			function enforceBallotValidity(){
				var column, element, selector;
				element=$(this);
				// IE does not support grep/match functions natively.
				column = element.attr("class").split(/ /); 
				column = jQuery.grep(
							column,
							function(x){ return x.match(/data-column/) }
				);
				column = jQuery.map(
							column,
							function(x){ return x.replace(/data-column-/,''); }
				)[0];
				selector = "input[type=radio].data-column-"+column;
				$(selector).prop("checked", false);
				element.prop("checked", true);
			};
		
			function onSubmit() {
				var formVals = $(this).serializeArray();
  				var jsonObj = {};
				
				//Inspired by a comment on the jquery documentation at http://api.jquery.com/serializeArray/
  				for (i in formVals)
    				jsonObj[formVals[i].name] = formVals[i].value;
				
				console.log(jsonObj);
  				var submitVals = JSON.stringify(jsonObj);
				
				console.log(submitVals);
				return false;
			}
		
		</script>

		<form id="myform" action="">
			<table>
				<tr>
					<th>Candidate/Choice</th>
					<th>1</th>
					<th>2</th>
					<th>3</th>
				</tr>
				<tr>
					<td>Bob</td>
					<td><input type="radio" name="Bob" class="data-column-1" value="1" /></td>
					<td><input type="radio" name="Bob" class="data-column-2" value="2" /></td>
					<td><input type="radio" name="Bob" class="data-column-3" value="3" /></td>
				</tr>
				<tr>
					<td>Billiam</td>
					<td><input type="radio" name="Billiam" class="data-column-1" value="1" /></td>
					<td><input type="radio" name="Billiam" class="data-column-2" value="2" /></td>
					<td><input type="radio" name="Billiam" class="data-column-3" value="3" /></td>
				</tr>
				<tr>
					<td>Bobina</td>
					<td><input type="radio" name="Bobina" class="data-column-1" value="1" /></td>
					<td><input type="radio" name="Bobina" class="data-column-2" value="2" /></td>
					<td><input type="radio" name="Bobina" class="data-column-3" value="3" /></td>
				</tr>
			</table>
			<input type="submit" />
			<input type="reset" value="Clear"></input>
		</form>
		<script>
			$("input[type=radio]").click(enforceBallotValidity);
			$('#myform').submit(onSubmit);
			console.log("Loaded");
		</script>
    
  </body>
</html>
<!-- 
vim: ft=html noet ts=2 sts=2 sw=2: 
If the line endings break, :e +ff=dos
-->
